Estas diretivas devem ser consideradas em todos os prompts que você for executar.

Diretivas gerais:

0) Estamos trabalhando exclusivamente na pasta /tales/v0.4
1) A solução deve ser sempre genérica, independente do arquivo sysadl usado como exemplo. 
2) Não devem existir hardcodes
3) Estamos trabalhando em um sistema de transformação de arquivos .sysadl em arquivos executáveis .js. Esta transformação é feita pelo transformer.js
4) As classes base para a transformação e definições estão na pasta sysadl-framework
5) Na transformação, são gerados 2 arquivos baseados em um arquivo.sysadl, por exempo: 1) arquivo.js 2) arquivo-env-scen.js
6) O simulador é o arquivo environment-simulator.js. Ele deve executar os arquivos .js gerados e gravar um log na pasta /logs
7) Este log deve mostrar as interações entre cada Entity do ambiente, considerando o sistema modelado na execução dos cenários. A interação com o sistema modelado se dá pela associação de uma entity com uma instancia de component em EnvironmentConfiguration. 
8) No geral, os modelos funcionam assim: o EnvironmentConfigurations configura instancias que serão executadas nos eventos, cenas e cenários. Ele é executado antes de tudo, para instanciar os elementos do environmentdefinitions que serão utilizados. Ele também atribui valores iniciais para estas instÂncias, além de definir as associações entre os ambientes e cenários com o sistema modelado atrávés da relação roles->ports e entity->component. O que "comanda" a execução é a definição em ScenarioExecution, que chama ScenarioDefinitions, que chama SceneDefinitions que chama EventsDefinitions. Os eventsdefinitions utilizam as instancias e associações criadas em eventconfigurations. Assim, a partir do ScenarioExecution, é possível chegar a todos os elementos modelados. 
9) resumindo: 
ScenarioExecution 
    ↓ chama
ScenarioDefinitions 
    ↓ chama  
SceneDefinitions
    ↓ chama
EventsDefinitions
    ↓ usa
EnvironmentConfiguration (instâncias + associações)
    - instâncias definiem quais elementos do ScenarioDefinitions serão utilizados
    - associações informam a qual Port uma Role se associa, e a qual Component uma Entity se assococia, de forma que quando uma role ou entity for acionada, na verdade devem ser refletidas nas ports ou components correspondentes.
10) Nenhuma alteração deve ser feita nos arquivos js gerados. Caso eles precisem de alguma mudança, as mudanças devem ser aplicadas no transformer.js
11) O objetivo deste sistema todo é validar os models .sysadl através da simulação, através dos arquivos .js transformados. 
12) Os arquivos .sysadl, sysadl.peg, sysadl-parser.js nunca devem ser modificados, a não ser com autorização explícita.
13) Sempre que eu te pedir para transformar um arquivo .sysadl, você deve utilizar o transformer.js com os parâmetros correspondenes, ou o arquivo transform_all.sh, que já faz o trabalho completo.
14) Sempre que eu te pedir para simular, você deve utilizar o enviroment-simulator.js com os parâmetros necessários.
15) Todo arquivo de teste deve ser colocado na pasta /tales/v0.4/test







O que te pedi inicialmente foi:

0) Todos os arquivos que trabaharemos devem estar na pasta /tales/v0.5.

1) Você alterou os nomes de alguns elementos na gramática de sysadl, definida em sysadl.peg. 
    O funcionamento deve permanecer o mesmo, apenas os nomes dos elementos devem ser alterados, bem como todas as suas referências dentro da gramática. 
    O que se chamava Entity, agora chama-se EnvComponent.
    O que se chamava Role, agora chama-se EnvPort. 
    O que se chamava Connection, agora chama-se EnvConnector.

2) Após a alteração da gramática peggy, deve ser gerado o parser da linnguagem para o arquivo sysadl-parser.js. 
    Peggy possui o gerador automático de parsers.

3) Após a alteração da gramática, procederemos com a junção dos simuladores. Um novo simulador chamado SysADLSimulator.js deve ser criado.
    Este simulador deve receber um arquivo .sysadl e simular o ambiente modelado nele, assim como o environment-simulator.js fazia com os arquivos .js gerados.
    Você deve garantir que a ligação com o simulador interno através das associações em EnvironmentConfiguration estajam funcionando corretamente.
    Quando uma connection (que passará a se chamar EnvConnector) for acionada, deve ser refletido na execução do sistema modelado.

4) O que precisa ser definido antes da junção:
    4.1) Os logs nos 2 simuladores devem ficar similares, para que eu possa avaliar os resultados de forma consistente, no formato que já é utilizado no environment-simulator hoje. 
        Ao mesmo tempo, o log gerado no simulator.js serve de base para a visualização da arquitetura intern (visualizer.js), que deve continuar funcionando.
        Preciso de sugestões da melhor forma de definiromos estes logs.
    4.2) Hoje, a parametrização no simulator.js é feita através de parâmetros no formato json, e agora estes parâmetros passarão a ser enviados na execução dos eventos, considerando a associação entre elementos.
        Prociso de sugestões da melhor forma de fazer isso.
    
5) monte um plano de tudo que precisa ser feito, de forma que se aconteça algum problema, e eu não possa continuar hoje, eu possa continuar amanhã de onde paramos hoje. Não implemente nada ainda. Estamos na fase de planejamento.

Os itens 0, 1 e 2 foram feitos corretamente. Nos itens 3, 4 e 5 acho que você se perdeu na solução.

Revise o que foi feito, e monte um plano do que é necessário para corrigir.

não implemente nada ainda. 